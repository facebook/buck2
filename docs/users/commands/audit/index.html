<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-users/commands/audit" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">audit | Buck2</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://buck2.build/docs/users/commands/audit/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="audit | Buck2"><meta data-rh="true" name="description" content="This document provides an overview of the commands and options available under buck2 audit."><meta data-rh="true" property="og:description" content="This document provides an overview of the commands and options available under buck2 audit."><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://buck2.build/docs/users/commands/audit/"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/users/commands/audit/" hreflang="en"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/users/commands/audit/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9RT0EWXQO8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Buck2" href="/opensearch.xml">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GEGGHE39PE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GEGGHE39PE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.365ec9d7.css">
<script src="/assets/js/runtime~main.7b2db4e0.js" defer="defer"></script>
<script src="/assets/js/main.116bbb72.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Buck2 Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Buck2 Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Buck2</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/api/">API</a><a class="navbar__item navbar__link" href="/docs/prelude/rules/">Rules</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/about/why/">About Buck2</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/why/">Why Buck2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/language_support/">Language / Ecosystem Support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/about/benefits/compared_to_buck1/">Benefits</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/benefits/compared_to_buck1/">Benefits When Compared to Buck1</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/bootstrapping/">Bootstrapping Buck2</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/getting_started/">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/what_is_buck2/">What is Buck2?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/install/">Installing Buck2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/tutorial_first_build/">Tutorial: Your First Buck2 Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/tutorial_adding_dependencies/">Tutorial: Adding Dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/tutorial_adding_tests/">Tutorial: Adding tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/tutorial_to_concepts/">From Tutorial to Concepts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/concepts/key_concepts/">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/key_concepts/">Key Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/concept_map/">Concept Map</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/build_rule/">Build Rule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/build_file/">Build File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/build_target/">Build Target</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/target_pattern/">Target Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/buck_query_language/">Buck Query Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/buck_out/">buck-out</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/visibility/">Visibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/toolchain/">Toolchain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/daemon/">Daemon (buckd)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/labels/">Labels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/isolation_dir/">Isolation Directory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/buckconfig/">.buckconfig</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/configurations/">Configurations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/modifiers/">Configuration modifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/glossary/">Glossary of Terms</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/users/commands/">Buck2 Users</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/users/commands/">Commands</a><button aria-label="Collapse sidebar category &#x27;Commands&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/aquery/">aquery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/users/commands/audit/">audit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/build/">build</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/bxl/">bxl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/clean/">clean</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/common-options/">common-options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/completion/">completion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/cquery/">cquery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/ctargets/">ctargets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/docs/">docs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/expand-external-cell/">expand-external-cell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/explain/">explain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/help-env/">help-env</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/init/">init</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/install/">install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/kill/">kill</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/killall/">killall</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/log/">log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/lsp/">lsp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/profile/">profile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/query/">query</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/root/">root</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/run/">run</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/server/">server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/starlark/">starlark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/status/">status</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/subscribe/">subscribe</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/targets/">targets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/test/">test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/uquery/">uquery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands/utargets/">utargets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/commands_extra/exit_codes/">Exit Codes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/how_tos/modifiers_setup/">How-tos</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/how_tos/modifiers_setup/">Setup configuration modifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/how_tos/modifiers_package/">Add configuration modifiers to entire directories</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/how_tos/modifiers_target/">Add configuration modifiers to a specific target</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/how_tos/modifiers_cli/">Specify configuration modifiers from the CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/how_tos/question_mark_modifier/">?modifier CLI Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/how_tos/compilation_database/">Compilation databases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/languages/go/overview/">Languages</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/languages/go/overview/">Go</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/languages/go/overview/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/languages/go/toolchains/">Toolchains</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/languages/go/third_party_packages/">Third-Party Packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/languages/go/gopackagesdriver/">IDE/Tools Integration (gopackagesdriver)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/languages/java/jvm_abis/">Java</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/languages/java/jvm_abis/">Java/Kotlin ABIs</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/cheat_sheet/">Cheat Sheet</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/faq/common_issues/">Troubleshooting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/faq/common_issues/">Common Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/faq/starlark_peak_mem/">Debugging Excess Starlark Peak Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/faq/buck_hanging/">Why is Buck2 hanging?</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/build_observability/interactive_console/">Build Observability</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/build_observability/interactive_console/">Buck2 Consoles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/build_observability/logging/">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/build_observability/build_report/">Build Report</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/remote_execution/">Remote Execution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/query/aquery/">Queries</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/query/aquery/">Aquery Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/query/cquery/">Cquery Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/query/uquery/">Uquery Environment</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/users/advanced/deferred_materialization/">Advanced Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/advanced/deferred_materialization/">Deferred Materialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/advanced/restarter/">Restarter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/advanced/in_memory_cache/">In Memory Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/users/advanced/external_cells/">External Cells</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/rule_authors/writing_rules/">Rule Authors</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/writing_rules/">Writing Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/writing_toolchains/">Writing Toolchains</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/transitive_sets/">Transitive Sets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/configurations/">Configurations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/configurations_by_example/">Configurations By Example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/configuration_transitions/">Configuration Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/custom_macros/">Macros</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/dynamic_dependencies/">Dynamic Dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/anon_targets/">Anonymous Targets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/test_execution/">Test Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/optimization/">Observability and Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/incremental_actions/">Incremental Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/load/">load()</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/alias/">Alias</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/subdir_glob/">subdir_glob()</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/local_resources/">Local Resources For Tests Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/package_files/">PACKAGE Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/dep_files/">Dep Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rule_authors/string_parameter_macros/">String parameter macros</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/bxl/">BXL Developers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/bxl/">About BXL</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/">Why BXL</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/tutorial/">Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/bxl/how_tos/basic_how_tos/">How-to guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/how_tos/basic_how_tos/">Basic How-Tos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/how_tos/how_to_cache_and_share_operations/">How to Cache and Share Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/how_tos/how_to_handle_errors/">How to Handle Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/how_tos/how_to_catch_building_artifacts_errors/">How to Catch Building Artifacts Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/how_tos/how_to_run_actions_based_on_the_content_of_artifact/">How to run actions based on the content of artifact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/how_tos/how_to_use_target_universe/">How to Use Target Universe in BXL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/how_tos/how_to_collect_telemetry_events/">How to Collect Telemetry Events</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/bxl/explanation/basics/">Explanation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/explanation/basics/">BXL Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/explanation/labels_and_nodes/">Understanding Labels and Nodes in Buck2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/explanation/bxl_cquery_vs_cli_cquery/">BXL cquery vs. Buck2 CLI cquery - Divergence in Configuration Handling</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bxl/faq/">FAQs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/">BXL APIs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/developers/architecture/buck2/">Buck2 Developers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/developers/architecture/buck2/">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/architecture/buck2/">Architectural Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/architecture/buck1_vs_buck2/">Buck1 vs Buck2</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/what-ran/">Finding Commands That Buck2 Ran</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/developers/starlark/environment/">Starlark Language</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/starlark/environment/">Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/starlark/gc/">A Moving Garbage Collector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/starlark/heaps/">Heaps and Heap References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/starlark/spec/">Starlark Language Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/starlark/types/">Starlark Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/starlark/values/">Value Representation</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/request_for_comments/">Request for Comments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/windows_cheat_sheet/">Windows Cheat Sheet</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/insights_and_knowledge/modern_dice/">Insights and Knowledge</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/insights_and_knowledge/modern_dice/">Introduction to Modern DICE</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Buck2 Users</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/users/commands/"><span itemprop="name">Commands</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">audit</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>audit</h1></header>
<p>This document provides an overview of the commands and options available under <code>buck2 audit</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit"><code>buck2 audit</code><a href="#buck2-audit" class="hash-link" aria-label="Direct link to buck2-audit" title="Direct link to buck2-audit">​</a></h2>
<p>Perform lower level queries</p>
<p><strong>Usage</strong>: <code>buck2 audit &lt;COMMAND&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subcommands">Subcommands:<a href="#subcommands" class="hash-link" aria-label="Direct link to Subcommands:" title="Direct link to Subcommands:">​</a></h3>
<ul>
<li><code>cell</code>: Query information about the [cells] list in .buckconfig.</li>
<li><code>file-package</code>: Map file paths to fully qualified package names.</li>
<li><code>classpath</code>: Prints out a target&#x27;s classpaths if it has one.
This command is deprecated and currently available for compatibility with buck1.
We will replace this command with something that can audit the entire <code>TemplatePlaceholderInfo</code> in the future.</li>
<li><code>config</code>: buck audit config</li>
<li><code>configurations</code>: prints the constraints for configuration IDs</li>
<li><code>includes</code>: list build file extensions imported at parse time.</li>
<li><code>prelude</code>: print the interpreter prelude to stdout</li>
<li><code>providers</code>: prints out the providers for a target pattern</li>
<li><code>subtargets</code>: Print all subtargets</li>
<li><code>analysis-queries</code>: buck audit analysis resolving query attrs</li>
<li><code>execution-platform-resolution</code>: prints out information about execution platform resolution</li>
<li><code>visibility</code>: Verify the visibility for transitive deps of the specified target(s) on the unconfigured target graph</li>
<li><code>starlark</code>: Debug Starlark interpreter</li>
<li><code>dep-files</code>: prints out the select files for a command</li>
<li><code>deferred-materializer</code>: Access and interact with the deferred materializer</li>
<li><code>output</code>: Query the action that produced the output artifact. Does not support BXL, test, scratch, or anon artifacts. If the configuration hash of the output path does not match the current platform configuration, the unconfigured target label will be returned.</li>
<li><code>parse</code>: Parses the buck-out path into parts that may be useful (ex: config hash, file path to artifact).</li>
<li><code>package-values</code>: Inspect package values</li>
<li><code>perf</code>: Commands for checking buck2 performance</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options">Common Options:<a href="#common-options" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-cell"><code>buck2 audit cell</code><a href="#buck2-audit-cell" class="hash-link" aria-label="Direct link to buck2-audit-cell" title="Direct link to buck2-audit-cell">​</a></h2>
<p>Query information about the [cells] list in .buckconfig.</p>
<p><strong>Usage</strong>: <code>buck2 audit cell [OPTIONS] [CELL_ALIASES]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments">Arguments:<a href="#arguments" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;CELL_ALIASES&gt;</code>
Cell aliases to query. These aliases will be resolved in the working directory cell.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-1">Common Options:<a href="#common-options-1" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options">Options:<a href="#options" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--json</code>
Output in JSON format</p>
</li>
<li>
<p><code>--paths-only</code>
Don&#x27;t include the cell name in the output</p>
</li>
<li>
<p><code>--aliases</code>
If enabled and no explicit aliases are passed, will query for all aliases in the working directory cell.</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-file-package"><code>buck2 audit file-package</code><a href="#buck2-audit-file-package" class="hash-link" aria-label="Direct link to buck2-audit-file-package" title="Direct link to buck2-audit-file-package">​</a></h2>
<p>Map file paths to fully qualified package names.</p>
<p><strong>Usage</strong>: <code>buck2 audit file-package [OPTIONS] [PATHS]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-1">Arguments:<a href="#arguments-1" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;PATHS&gt;</code>
File paths to resolve to package names (build files, directories, or any source files)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-2">Common Options:<a href="#common-options-2" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-1">Options:<a href="#options-1" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--json</code>
Output in JSON format</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-classpath"><code>buck2 audit classpath</code><a href="#buck2-audit-classpath" class="hash-link" aria-label="Direct link to buck2-audit-classpath" title="Direct link to buck2-audit-classpath">​</a></h2>
<p>Prints out a target&#x27;s classpaths if it has one.
This command is deprecated and currently available for compatibility with buck1.
We will replace this command with something that can audit the entire <code>TemplatePlaceholderInfo</code> in the future.</p>
<p><strong>Usage</strong>: <code>buck2 audit classpath [OPTIONS] [TARGET_PATTERNS]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-2">Arguments:<a href="#arguments-2" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;TARGET_PATTERNS&gt;</code>
Target patterns to audit</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-3">Common Options:<a href="#common-options-3" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-2">Options:<a href="#options-2" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--json</code>
Output in JSON format</p>
</li>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-config"><code>buck2 audit config</code><a href="#buck2-audit-config" class="hash-link" aria-label="Direct link to buck2-audit-config" title="Direct link to buck2-audit-config">​</a></h2>
<p>buck audit config</p>
<p><strong>Usage</strong>: <code>buck2 audit config [OPTIONS] [SPECS]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-3">Arguments:<a href="#arguments-3" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;SPECS&gt;</code>
config section/key specs of the form <code>section</code> or <code>section.key</code>. If any specs are provided, only values matching a spec will be printed (section headers will be printed only for sections with a key matching the spec)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-4">Common Options:<a href="#common-options-4" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-3">Options:<a href="#options-3" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--cell &lt;CELL&gt;</code></p>
</li>
<li>
<p><code>--all-cells</code>
Produce information for all cells that Buck2 knows about</p>
</li>
<li>
<p><code>--output-format &lt;OUTPUT_FORMAT&gt;</code></p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>simple</code></li>
<li><code>json</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>--json</code></p>
</li>
<li>
<p><code>--location &lt;LOCATION_STYLE&gt;</code></p>
<ul>
<li>Default value: <code>none</code></li>
<li>Possible values:<!-- -->
<ul>
<li><code>none</code></li>
<li><code>direct</code></li>
<li><code>extended</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>--value &lt;VALUE_STYLE&gt;</code></p>
<ul>
<li>Default value: <code>resolved</code></li>
<li>Possible values:<!-- -->
<ul>
<li><code>resolved</code></li>
<li><code>raw</code></li>
<li><code>both</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-configurations"><code>buck2 audit configurations</code><a href="#buck2-audit-configurations" class="hash-link" aria-label="Direct link to buck2-audit-configurations" title="Direct link to buck2-audit-configurations">​</a></h2>
<p>prints the constraints for configuration IDs</p>
<p><strong>Usage</strong>: <code>buck2 audit configurations [OPTIONS] [configurations]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-4">Arguments:<a href="#arguments-4" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;configurations&gt;</code>
configurations to audit (example: <code>cell//package:target-105fe3389fc7e436</code>). If none provided, will print information about all known configurations.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-5">Common Options:<a href="#common-options-5" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-4">Options:<a href="#options-4" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-includes"><code>buck2 audit includes</code><a href="#buck2-audit-includes" class="hash-link" aria-label="Direct link to buck2-audit-includes" title="Direct link to buck2-audit-includes">​</a></h2>
<p>list build file extensions imported at parse time.</p>
<p><strong>Usage</strong>: <code>buck2 audit includes [OPTIONS] [BUILD_FILES]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-5">Arguments:<a href="#arguments-5" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;BUILD_FILES&gt;</code>
Build files to audit. These are expected to be relative paths from the working dir cell.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-6">Common Options:<a href="#common-options-6" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-5">Options:<a href="#options-5" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--json</code>
Print json representation of outputs</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-prelude"><code>buck2 audit prelude</code><a href="#buck2-audit-prelude" class="hash-link" aria-label="Direct link to buck2-audit-prelude" title="Direct link to buck2-audit-prelude">​</a></h2>
<p>print the interpreter prelude to stdout</p>
<p><strong>Usage</strong>: <code>buck2 audit prelude [OPTIONS]</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-7">Common Options:<a href="#common-options-7" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-6">Options:<a href="#options-6" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-providers"><code>buck2 audit providers</code><a href="#buck2-audit-providers" class="hash-link" aria-label="Direct link to buck2-audit-providers" title="Direct link to buck2-audit-providers">​</a></h2>
<p>prints out the providers for a target pattern</p>
<p><strong>Usage</strong>: <code>buck2 audit providers [OPTIONS] &lt;TARGET_PATTERNS&gt;...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-6">Arguments:<a href="#arguments-6" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;TARGET_PATTERNS&gt;</code>
Patterns to analyze</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-8">Common Options:<a href="#common-options-8" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-7">Options:<a href="#options-7" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--quiet</code></p>
</li>
<li>
<p><code>-l, --list</code>
List the available providers</p>
</li>
<li>
<p><code>--print-debug</code>
Print the providers using debug format (very verbose)</p>
</li>
<li>
<p><code>-u, --target-universe &lt;TARGET_UNIVERSE&gt;</code>
Comma separated list of targets to construct a configured target universe.</p>
<p>When the option is specified, command targets are be resolved in this universe.
Additionally, <code>--target-platforms=</code> and <code>--modifier=</code> flags are be used to configure the
universe targets, not the command targets.</p>
<p>This argument is particularly recommended on most non-trivial cqueries. In the absence of
this argument, buck2 will use the target literals in your cquery expression as the value
for this argument, which may not be what you want.</p>
</li>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-subtargets"><code>buck2 audit subtargets</code><a href="#buck2-audit-subtargets" class="hash-link" aria-label="Direct link to buck2-audit-subtargets" title="Direct link to buck2-audit-subtargets">​</a></h2>
<p>Print all subtargets</p>
<p><strong>Usage</strong>: <code>buck2 audit subtargets [OPTIONS] &lt;TARGET_PATTERNS&gt;...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-7">Arguments:<a href="#arguments-7" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;TARGET_PATTERNS&gt;</code>
Patterns to analyze</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-9">Common Options:<a href="#common-options-9" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-8">Options:<a href="#options-8" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--shallow</code>
Do not recursively print all nested subtargets; print only the first level. This is set to false by default</p>
</li>
<li>
<p><code>--json</code>
Print subtargets as JSON</p>
</li>
<li>
<p><code>-u, --target-universe &lt;TARGET_UNIVERSE&gt;</code>
Comma separated list of targets to construct a configured target universe.</p>
<p>When the option is specified, command targets are be resolved in this universe.
Additionally, <code>--target-platforms=</code> and <code>--modifier=</code> flags are be used to configure the
universe targets, not the command targets.</p>
<p>This argument is particularly recommended on most non-trivial cqueries. In the absence of
this argument, buck2 will use the target literals in your cquery expression as the value
for this argument, which may not be what you want.</p>
</li>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-analysis-queries"><code>buck2 audit analysis-queries</code><a href="#buck2-audit-analysis-queries" class="hash-link" aria-label="Direct link to buck2-audit-analysis-queries" title="Direct link to buck2-audit-analysis-queries">​</a></h2>
<p>buck audit analysis resolving query attrs</p>
<p><strong>Usage</strong>: <code>buck2 audit analysis-queries [OPTIONS] [TARGET_PATTERNS]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-8">Arguments:<a href="#arguments-8" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;TARGET_PATTERNS&gt;</code>
Patterns to evaluate. The query attributes for targets matching these patterns will be evaluated</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-10">Common Options:<a href="#common-options-10" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-9">Options:<a href="#options-9" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--include-outputs</code>
Enable to print the outputs for the targets in the resolved queries</p>
</li>
<li>
<p><code>-u, --target-universe &lt;TARGET_UNIVERSE&gt;</code>
Comma separated list of targets to construct a configured target universe.</p>
<p>When the option is specified, command targets are be resolved in this universe.
Additionally, <code>--target-platforms=</code> and <code>--modifier=</code> flags are be used to configure the
universe targets, not the command targets.</p>
<p>This argument is particularly recommended on most non-trivial cqueries. In the absence of
this argument, buck2 will use the target literals in your cquery expression as the value
for this argument, which may not be what you want.</p>
</li>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-execution-platform-resolution"><code>buck2 audit execution-platform-resolution</code><a href="#buck2-audit-execution-platform-resolution" class="hash-link" aria-label="Direct link to buck2-audit-execution-platform-resolution" title="Direct link to buck2-audit-execution-platform-resolution">​</a></h2>
<p>prints out information about execution platform resolution</p>
<p><strong>Usage</strong>: <code>buck2 audit execution-platform-resolution [OPTIONS] [TARGET_PATTERNS]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-9">Arguments:<a href="#arguments-9" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;TARGET_PATTERNS&gt;</code>
Patterns to analyze</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-11">Common Options:<a href="#common-options-11" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-10">Options:<a href="#options-10" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-u, --target-universe &lt;TARGET_UNIVERSE&gt;</code>
Comma separated list of targets to construct a configured target universe.</p>
<p>When the option is specified, command targets are be resolved in this universe.
Additionally, <code>--target-platforms=</code> and <code>--modifier=</code> flags are be used to configure the
universe targets, not the command targets.</p>
<p>This argument is particularly recommended on most non-trivial cqueries. In the absence of
this argument, buck2 will use the target literals in your cquery expression as the value
for this argument, which may not be what you want.</p>
</li>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-visibility"><code>buck2 audit visibility</code><a href="#buck2-audit-visibility" class="hash-link" aria-label="Direct link to buck2-audit-visibility" title="Direct link to buck2-audit-visibility">​</a></h2>
<p>Verify the visibility for transitive deps of the specified target(s) on the unconfigured target graph</p>
<p><strong>Usage</strong>: <code>buck2 audit visibility [OPTIONS] [TARGET_PATTERNS]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-10">Arguments:<a href="#arguments-10" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;TARGET_PATTERNS&gt;</code>
Target pattern(s) to analyze.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-12">Common Options:<a href="#common-options-12" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-11">Options:<a href="#options-11" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-starlark"><code>buck2 audit starlark</code><a href="#buck2-audit-starlark" class="hash-link" aria-label="Direct link to buck2-audit-starlark" title="Direct link to buck2-audit-starlark">​</a></h2>
<p>Debug Starlark interpreter</p>
<p><strong>Usage</strong>: <code>buck2 audit starlark &lt;COMMAND&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subcommands-1">Subcommands:<a href="#subcommands-1" class="hash-link" aria-label="Direct link to Subcommands:" title="Direct link to Subcommands:">​</a></h3>
<ul>
<li><code>module</code>: Inspect Starlark module by fully qualified import string like foo//bar<!-- -->:baz<!-- -->.bzl</li>
<li><code>package-deps</code>: Inspect Starlark package file all bzl dependencies by package name like foo//bar/baz</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-13">Common Options:<a href="#common-options-13" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-starlark-module"><code>buck2 audit starlark module</code><a href="#buck2-audit-starlark-module" class="hash-link" aria-label="Direct link to buck2-audit-starlark-module" title="Direct link to buck2-audit-starlark-module">​</a></h2>
<p>Inspect Starlark module by fully qualified import string like foo//bar<!-- -->:baz<!-- -->.bzl</p>
<p><strong>Usage</strong>: <code>buck2 audit starlark module [OPTIONS] &lt;IMPORT_PATH&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-11">Arguments:<a href="#arguments-11" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;IMPORT_PATH&gt;</code>
Module import path</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-14">Common Options:<a href="#common-options-14" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-12">Options:<a href="#options-12" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-starlark-package-deps"><code>buck2 audit starlark package-deps</code><a href="#buck2-audit-starlark-package-deps" class="hash-link" aria-label="Direct link to buck2-audit-starlark-package-deps" title="Direct link to buck2-audit-starlark-package-deps">​</a></h2>
<p>Inspect Starlark package file all bzl dependencies by package name like foo//bar/baz</p>
<p><strong>Usage</strong>: <code>buck2 audit starlark package-deps [OPTIONS] &lt;PACKAGE&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-12">Arguments:<a href="#arguments-12" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;PACKAGE&gt;</code>
Package</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-15">Common Options:<a href="#common-options-15" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-13">Options:<a href="#options-13" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-dep-files"><code>buck2 audit dep-files</code><a href="#buck2-audit-dep-files" class="hash-link" aria-label="Direct link to buck2-audit-dep-files" title="Direct link to buck2-audit-dep-files">​</a></h2>
<p>prints out the select files for a command</p>
<p><strong>Usage</strong>: <code>buck2 audit dep-files [OPTIONS] &lt;PATTERN&gt; &lt;CATEGORY&gt; [IDENTIFIER]</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-13">Arguments:<a href="#arguments-13" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li>
<p><code>&lt;PATTERN&gt;</code>
Target to query dep files for</p>
</li>
<li>
<p><code>&lt;CATEGORY&gt;</code>
Action category</p>
</li>
<li>
<p><code>&lt;IDENTIFIER&gt;</code>
Action identifier</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-16">Common Options:<a href="#common-options-16" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-14">Options:<a href="#options-14" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer"><code>buck2 audit deferred-materializer</code><a href="#buck2-audit-deferred-materializer" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer" title="Direct link to buck2-audit-deferred-materializer">​</a></h2>
<p>Access and interact with the deferred materializer</p>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer [OPTIONS] &lt;COMMAND&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subcommands-2">Subcommands:<a href="#subcommands-2" class="hash-link" aria-label="Direct link to Subcommands:" title="Direct link to Subcommands:">​</a></h3>
<ul>
<li><code>list</code></li>
<li><code>list-subscriptions</code></li>
<li><code>fsck</code></li>
<li><code>refresh</code></li>
<li><code>get-refresh-log</code>: Get the log for TTL refreshes</li>
<li><code>test-iter</code></li>
<li><code>flush-access-times</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-17">Common Options:<a href="#common-options-17" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-15">Options:<a href="#options-15" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer-list"><code>buck2 audit deferred-materializer list</code><a href="#buck2-audit-deferred-materializer-list" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer-list" title="Direct link to buck2-audit-deferred-materializer-list">​</a></h2>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer list</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-18">Common Options:<a href="#common-options-18" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer-list-subscriptions"><code>buck2 audit deferred-materializer list-subscriptions</code><a href="#buck2-audit-deferred-materializer-list-subscriptions" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer-list-subscriptions" title="Direct link to buck2-audit-deferred-materializer-list-subscriptions">​</a></h2>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer list-subscriptions</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-19">Common Options:<a href="#common-options-19" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer-fsck"><code>buck2 audit deferred-materializer fsck</code><a href="#buck2-audit-deferred-materializer-fsck" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer-fsck" title="Direct link to buck2-audit-deferred-materializer-fsck">​</a></h2>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer fsck</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-20">Common Options:<a href="#common-options-20" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer-refresh"><code>buck2 audit deferred-materializer refresh</code><a href="#buck2-audit-deferred-materializer-refresh" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer-refresh" title="Direct link to buck2-audit-deferred-materializer-refresh">​</a></h2>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer refresh &lt;MIN_TTL&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-14">Arguments:<a href="#arguments-14" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;MIN_TTL&gt;</code>
Minimum TTL to require for actions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-21">Common Options:<a href="#common-options-21" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer-get-refresh-log"><code>buck2 audit deferred-materializer get-refresh-log</code><a href="#buck2-audit-deferred-materializer-get-refresh-log" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer-get-refresh-log" title="Direct link to buck2-audit-deferred-materializer-get-refresh-log">​</a></h2>
<p>Get the log for TTL refreshes</p>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer get-refresh-log</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-22">Common Options:<a href="#common-options-22" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer-test-iter"><code>buck2 audit deferred-materializer test-iter</code><a href="#buck2-audit-deferred-materializer-test-iter" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer-test-iter" title="Direct link to buck2-audit-deferred-materializer-test-iter">​</a></h2>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer test-iter [OPTIONS]</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-23">Common Options:<a href="#common-options-23" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-16">Options:<a href="#options-16" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--count &lt;COUNT&gt;</code></p>
<ul>
<li>Default value: <code>1</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-deferred-materializer-flush-access-times"><code>buck2 audit deferred-materializer flush-access-times</code><a href="#buck2-audit-deferred-materializer-flush-access-times" class="hash-link" aria-label="Direct link to buck2-audit-deferred-materializer-flush-access-times" title="Direct link to buck2-audit-deferred-materializer-flush-access-times">​</a></h2>
<p><strong>Usage</strong>: <code>buck2 audit deferred-materializer flush-access-times</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-24">Common Options:<a href="#common-options-24" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-output"><code>buck2 audit output</code><a href="#buck2-audit-output" class="hash-link" aria-label="Direct link to buck2-audit-output" title="Direct link to buck2-audit-output">​</a></h2>
<p>Query the action that produced the output artifact. Does not support BXL, test, scratch, or anon artifacts. If the configuration hash of the output path does not match the current platform configuration, the unconfigured target label will be returned.</p>
<p><strong>Usage</strong>: <code>buck2 audit output [OPTIONS] &lt;OUTPUT_PATH&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-15">Arguments:<a href="#arguments-15" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;OUTPUT_PATH&gt;</code>
The buck-out path to the build artifact, starting with <code>buck-out</code> and including the configuration platform.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-25">Common Options:<a href="#common-options-25" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-17">Options:<a href="#options-17" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--json</code></p>
</li>
<li>
<p><code>-A, --output-all-attributes</code>
Output all attributes, equivalent of --output-attribute &#x27;&#x27;.</p>
<p>Avoid using this flag in automation because it may be expensive to produce certain attributes, and because it makes harder to track which special attributes are used.</p>
</li>
<li>
<p><code>-B, --output-basic-attributes</code>
Output basic attributes, namely those the user can supply, plus rule type and package name</p>
</li>
<li>
<p><code>-a, --output-attribute &lt;ATTRIBUTE&gt;</code>
Regular expressions to match attributes. Regular expressions are used in &quot;search&quot; mode, so for example empty string matches all attributes including special attributes.</p>
<p>When using in automation, please specify the regular expression to match the attribute precisely, for example <code>--output-attribute &#x27;^headers$&#x27;</code> to make it easier to track which special attributes are used.</p>
</li>
<li>
<p><code>--output-attributes &lt;ATTRIBUTE&gt;</code>
Deprecated: Use <code>--output-attribute</code> instead.</p>
<p>List of space-separated attributes to output, --output-attributes attr1 attr2.</p>
</li>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-parse"><code>buck2 audit parse</code><a href="#buck2-audit-parse" class="hash-link" aria-label="Direct link to buck2-audit-parse" title="Direct link to buck2-audit-parse">​</a></h2>
<p>Parses the buck-out path into parts that may be useful (ex: config hash, file path to artifact).</p>
<p><strong>Usage</strong>: <code>buck2 audit parse [OPTIONS] &lt;OUTPUT_PATH&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-16">Arguments:<a href="#arguments-16" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;OUTPUT_PATH&gt;</code>
The buck-out path to the build artifact, starting with <code>buck-out</code> and including the configuration platform.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-26">Common Options:<a href="#common-options-26" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-18">Options:<a href="#options-18" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-package-values"><code>buck2 audit package-values</code><a href="#buck2-audit-package-values" class="hash-link" aria-label="Direct link to buck2-audit-package-values" title="Direct link to buck2-audit-package-values">​</a></h2>
<p>Inspect package values.</p>
<p>Package values is the thing set with <code>write_package_value</code> function from <code>PACKAGE</code> files.</p>
<p><strong>Usage</strong>: <code>buck2 audit package-values [OPTIONS] [PACKAGES]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-17">Arguments:<a href="#arguments-17" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;PACKAGES&gt;</code>
Package names to inspect (like <code>//foo/bar</code>, no trailing colon)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-27">Common Options:<a href="#common-options-27" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-19">Options:<a href="#options-19" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
This option is not used</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-perf"><code>buck2 audit perf</code><a href="#buck2-audit-perf" class="hash-link" aria-label="Direct link to buck2-audit-perf" title="Direct link to buck2-audit-perf">​</a></h2>
<p>Commands for checking buck2 performance</p>
<p><strong>Usage</strong>: <code>buck2 audit perf &lt;COMMAND&gt;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subcommands-3">Subcommands:<a href="#subcommands-3" class="hash-link" aria-label="Direct link to Subcommands:" title="Direct link to Subcommands:">​</a></h3>
<ul>
<li><code>configured-graph-size</code>: utility to measure performance of configured graph size computation</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-28">Common Options:<a href="#common-options-28" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buck2-audit-perf-configured-graph-size"><code>buck2 audit perf configured-graph-size</code><a href="#buck2-audit-perf-configured-graph-size" class="hash-link" aria-label="Direct link to buck2-audit-perf-configured-graph-size" title="Direct link to buck2-audit-perf-configured-graph-size">​</a></h2>
<p>utility to measure performance of configured graph size computation</p>
<p><strong>Usage</strong>: <code>buck2 audit perf configured-graph-size [OPTIONS] [TARGET_PATTERNS]...</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arguments-18">Arguments:<a href="#arguments-18" class="hash-link" aria-label="Direct link to Arguments:" title="Direct link to Arguments:">​</a></h3>
<ul>
<li><code>&lt;TARGET_PATTERNS&gt;</code>
Target patterns to audit</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options-29">Common Options:<a href="#common-options-29" class="hash-link" aria-label="Direct link to Common Options:" title="Direct link to Common Options:">​</a></h3>
<p>Common options are documented on the <a href="/docs/users/commands/common-options/">Common Options</a> page.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="options-20">Options:<a href="#options-20" class="hash-link" aria-label="Direct link to Options:" title="Direct link to Options:">​</a></h3>
<ul>
<li>
<p><code>--json</code></p>
</li>
<li>
<p><code>--sketch</code>
whether to compute sketch or not</p>
</li>
<li>
<p><code>-u, --target-universe &lt;TARGET_UNIVERSE&gt;</code>
Comma separated list of targets to construct a configured target universe.</p>
<p>When the option is specified, command targets are be resolved in this universe.
Additionally, <code>--target-platforms=</code> and <code>--modifier=</code> flags are be used to configure the
universe targets, not the command targets.</p>
<p>This argument is particularly recommended on most non-trivial cqueries. In the absence of
this argument, buck2 will use the target literals in your cquery expression as the value
for this argument, which may not be what you want.</p>
</li>
<li>
<p><code>--target-platforms &lt;PLATFORM&gt;</code>
Configuration target (one) to use to configure targets</p>
</li>
<li>
<p><code>-m, --modifier &lt;VALUE&gt;</code>
A configuration modifier to configure all targets on the command line. This may be a constraint value target.</p>
</li>
<li>
<p><code>--disable-starlark-types</code>
Disable runtime type checking in Starlark interpreter.</p>
<p>This option is not stable, and can be used only locally to diagnose evaluation performance problems.</p>
</li>
<li>
<p><code>--stack</code>
Record or show target call stacks.</p>
<p>Starlark call stacks will be included in duplicate targets error.</p>
<p>If a command outputs targets (like <code>targets</code> command), starlark call stacks will be printed after the targets.</p>
</li>
<li>
<p><code>--profile-patterns &lt;PROFILE_PATTERNS&gt;</code>
Enables profiling for all evaluations whose evaluation identifier matches one of the provided patterns.</p>
<p>Some examples identifiers: analysis/cell//buck2/app/buck2_action_impl<!-- -->:buck2_action_impl<!-- --> (cfg<!-- -->:linux-x86_64<!-- -->#27ac5723e0c99706) load/cell//build_defs/json.bzl load/prelude//playground/test.bxl load/cell//build_defs/json.bzl@other_cell load_buildfile/fbcode//third-party-buck/platform010/build/ncurses load_packagefile/fbcode//cli/rust/cli_delegate anon_analysis/anon//:_anon_link_rule (anon: 766183dc9b6f680a) (fbcode//buck2/platform/execution<!-- -->:linux-x86_64<!-- -->#08961b14cfb182aa) bxl/prelude//playground/test.bxl<!-- -->:playground</p>
<p>You can pass <code>--profile-patterns=.*</code> to enable no-op profiling for everything (additionally pass <code>--profile-patterns-mode=none</code> to use no-op profiling to just get a list of all the identifiers).</p>
<p>The profile results will be written to individual .profile files in <code>&lt;ROOT_OUTPUT&gt;/&lt;data+time&gt;-&lt;uuid&gt;/</code> where ROOT_OUTPUT comes from the --profile-patterns-output flag. In that directory there will also be a file listing all the identifiers that were profiled.</p>
<p>Enabling/disabling profiling of an evaluation will invalidate the results of that evaluation and it will be recomputed. In some cases, this will cause other work to also need to be redone (for example, invalidating the result of loading PACKAGE files causes all consumers to be recomputed). But if you keep profiling options consistent between commands, only the work that is otherwise invalidated will be redone (and only for those would profiling results be created).</p>
<p>You must also pass --profile-patterns-mode and --profile-patterns-output.</p>
</li>
<li>
<p><code>--profile-patterns-output &lt;PATH&gt;</code></p>
</li>
<li>
<p><code>--profile-patterns-mode &lt;PROFILE_PATTERNS_MODE&gt;</code>
Profile mode.</p>
<p>Memory profiling modes have suffixes either <code>-allocated</code> or <code>-retained</code>.</p>
<p><code>-retained</code> means memory kept in frozen starlark heaps after analysis completes. <code>-retained</code> does not work when profiling loading, because no memory is retained after loading and frozen heap is not even created. This is probably what you want when profiling analysis.</p>
<p><code>-allocated</code> means allocated memory, including memory which is later garbage collected.</p>
<ul>
<li>Possible values:<!-- -->
<ul>
<li><code>time-flame</code></li>
<li><code>heap-allocated</code></li>
<li><code>heap-retained</code></li>
<li><code>heap-flame-allocated</code></li>
<li><code>heap-flame-retained</code></li>
<li><code>heap-summary-allocated</code></li>
<li><code>heap-summary-retained</code></li>
<li><code>statement</code></li>
<li><code>bytecode</code></li>
<li><code>bytecode-pairs</code></li>
<li><code>typecheck</code></li>
<li><code>coverage</code></li>
<li><code>none</code></li>
</ul>
</li>
</ul>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/users/commands/aquery/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">aquery</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/users/commands/build/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">build</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#buck2-audit" class="table-of-contents__link toc-highlight"><code>buck2 audit</code></a><ul><li><a href="#subcommands" class="table-of-contents__link toc-highlight">Subcommands:</a></li><li><a href="#common-options" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-cell" class="table-of-contents__link toc-highlight"><code>buck2 audit cell</code></a><ul><li><a href="#arguments" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-1" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-file-package" class="table-of-contents__link toc-highlight"><code>buck2 audit file-package</code></a><ul><li><a href="#arguments-1" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-2" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-1" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-classpath" class="table-of-contents__link toc-highlight"><code>buck2 audit classpath</code></a><ul><li><a href="#arguments-2" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-3" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-2" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-config" class="table-of-contents__link toc-highlight"><code>buck2 audit config</code></a><ul><li><a href="#arguments-3" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-4" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-3" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-configurations" class="table-of-contents__link toc-highlight"><code>buck2 audit configurations</code></a><ul><li><a href="#arguments-4" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-5" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-4" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-includes" class="table-of-contents__link toc-highlight"><code>buck2 audit includes</code></a><ul><li><a href="#arguments-5" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-6" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-5" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-prelude" class="table-of-contents__link toc-highlight"><code>buck2 audit prelude</code></a><ul><li><a href="#common-options-7" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-6" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-providers" class="table-of-contents__link toc-highlight"><code>buck2 audit providers</code></a><ul><li><a href="#arguments-6" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-8" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-7" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-subtargets" class="table-of-contents__link toc-highlight"><code>buck2 audit subtargets</code></a><ul><li><a href="#arguments-7" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-9" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-8" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-analysis-queries" class="table-of-contents__link toc-highlight"><code>buck2 audit analysis-queries</code></a><ul><li><a href="#arguments-8" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-10" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-9" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-execution-platform-resolution" class="table-of-contents__link toc-highlight"><code>buck2 audit execution-platform-resolution</code></a><ul><li><a href="#arguments-9" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-11" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-10" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-visibility" class="table-of-contents__link toc-highlight"><code>buck2 audit visibility</code></a><ul><li><a href="#arguments-10" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-12" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-11" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-starlark" class="table-of-contents__link toc-highlight"><code>buck2 audit starlark</code></a><ul><li><a href="#subcommands-1" class="table-of-contents__link toc-highlight">Subcommands:</a></li><li><a href="#common-options-13" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-starlark-module" class="table-of-contents__link toc-highlight"><code>buck2 audit starlark module</code></a><ul><li><a href="#arguments-11" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-14" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-12" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-starlark-package-deps" class="table-of-contents__link toc-highlight"><code>buck2 audit starlark package-deps</code></a><ul><li><a href="#arguments-12" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-15" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-13" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-dep-files" class="table-of-contents__link toc-highlight"><code>buck2 audit dep-files</code></a><ul><li><a href="#arguments-13" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-16" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-14" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer</code></a><ul><li><a href="#subcommands-2" class="table-of-contents__link toc-highlight">Subcommands:</a></li><li><a href="#common-options-17" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-15" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer-list" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer list</code></a><ul><li><a href="#common-options-18" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer-list-subscriptions" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer list-subscriptions</code></a><ul><li><a href="#common-options-19" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer-fsck" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer fsck</code></a><ul><li><a href="#common-options-20" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer-refresh" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer refresh</code></a><ul><li><a href="#arguments-14" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-21" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer-get-refresh-log" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer get-refresh-log</code></a><ul><li><a href="#common-options-22" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer-test-iter" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer test-iter</code></a><ul><li><a href="#common-options-23" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-16" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-deferred-materializer-flush-access-times" class="table-of-contents__link toc-highlight"><code>buck2 audit deferred-materializer flush-access-times</code></a><ul><li><a href="#common-options-24" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-output" class="table-of-contents__link toc-highlight"><code>buck2 audit output</code></a><ul><li><a href="#arguments-15" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-25" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-17" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-parse" class="table-of-contents__link toc-highlight"><code>buck2 audit parse</code></a><ul><li><a href="#arguments-16" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-26" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-18" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-package-values" class="table-of-contents__link toc-highlight"><code>buck2 audit package-values</code></a><ul><li><a href="#arguments-17" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-27" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-19" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li><li><a href="#buck2-audit-perf" class="table-of-contents__link toc-highlight"><code>buck2 audit perf</code></a><ul><li><a href="#subcommands-3" class="table-of-contents__link toc-highlight">Subcommands:</a></li><li><a href="#common-options-28" class="table-of-contents__link toc-highlight">Common Options:</a></li></ul></li><li><a href="#buck2-audit-perf-configured-graph-size" class="table-of-contents__link toc-highlight"><code>buck2 audit perf configured-graph-size</code></a><ul><li><a href="#arguments-18" class="table-of-contents__link toc-highlight">Arguments:</a></li><li><a href="#common-options-29" class="table-of-contents__link toc-highlight">Common Options:</a></li><li><a href="#options-20" class="table-of-contents__link toc-highlight">Options:</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">User guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>