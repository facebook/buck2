load("@fbcode_macros//build_defs:cpp_binary.bzl", "cpp_binary")
load("@fbcode_macros//build_defs:cpp_library.bzl", "cpp_library")
load("@fbcode_macros//build_defs:rust_library.bzl", "rust_library")

cpp_library(
    name = "cpp_lib",
    srcs = [
        "cpp_lib.cpp",
    ],
)

rust_library(
    name = "rust_lib",
    srcs = [
        "rust_lib.rs",
    ],
    cpp_deps = [
        ":cpp_lib",
    ],
    link_style = "static",
)

cpp_binary(
    # @autodeps-skip
    name = "main",
    srcs = ["main.cpp"],
    deps = [
        ":cpp_lib",
        ":rust_lib",
    ],
)
