<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-rfcs/bxl-streaming" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">[RFC][BXL] Streamed Output in BXL | Buck2</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://buck2.build/docs/rfcs/bxl-streaming/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="[RFC][BXL] Streamed Output in BXL | Buck2"><meta data-rh="true" name="description" content="1. Overview and Context"><meta data-rh="true" property="og:description" content="1. Overview and Context"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://buck2.build/docs/rfcs/bxl-streaming/"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/rfcs/bxl-streaming/" hreflang="en"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/rfcs/bxl-streaming/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9RT0EWXQO8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Buck2" href="/opensearch.xml">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GEGGHE39PE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GEGGHE39PE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.365ec9d7.css">
<script src="/assets/js/runtime~main.7b2db4e0.js" defer="defer"></script>
<script src="/assets/js/main.116bbb72.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Buck2 Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Buck2 Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Buck2</b></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/api/">API</a><a class="navbar__item navbar__link" href="/docs/prelude/rules/">Rules</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>[RFC][BXL] Streamed Output in BXL</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview-and-context">1. Overview and Context<a href="#1-overview-and-context" class="hash-link" aria-label="Direct link to 1. Overview and Context" title="Direct link to 1. Overview and Context">​</a></h2>
<p>BXL scripts can primarily be divided into <strong>two phases</strong>:</p>
<ol>
<li><strong>Phase 1 (Evaluation)</strong>: The BXL script is interpreted. During this phase,
calls to <code>ctx.output.ensure(...)</code> register artifacts that should be
materialized later, but the actual materialization does not happen yet.</li>
<li><strong>Phase 2 (Materialization)</strong>: It materializes all artifacts previously
registered via <code>ctx.output.ensure(...)</code>.</li>
</ol>
<p>Under the current model, all <code>ctx.output.print(...)</code> produce their output only
at the end of Phase 2 (i.e., after all artifacts have been materialized). This
make bxl users cannot get the output from bxl as soon as it is ready.</p>
<p>In some use cases, streaming output is desired:</p>
<ul>
<li>Users might want partial output or intermediate query results right away,
rather than waiting for the entire BXL script to finish.</li>
<li>Users might want an immediate path of an artifact as soon as it is
materialized, to trigger a follow-up action in a more interactive or
incremental workflow.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-goal">2. Goal<a href="#2-goal" class="hash-link" aria-label="Direct link to 2. Goal" title="Direct link to 2. Goal">​</a></h2>
<p>We aim to introduce an option that allows streaming output as soon as relevant
artifacts or other results like query results are ready. Specifically, allow
users to output the information that not depends on artifacts immediately in
Phase 1, and stream the output as relevant artifacts are available in Phase 2.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-proposed-api">3. Proposed API<a href="#3-proposed-api" class="hash-link" aria-label="Direct link to 3. Proposed API" title="Direct link to 3. Proposed API">​</a></h2>
<p>We introduce new apis <code>ctx.output.stream/stream_json</code> that would have
“streaming” behavior:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def ctx.output.stream(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *args,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sep: str = &quot; &quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    additional_waits: List[bxl.EnsuredArtifact] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) -&gt; None:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Print arguments either immediately (phase 1) or in a streaming manner (phase 2).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - If no `EnsuredArtifact` appears in args, it is output immediately during phase 1 evaluation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - If there are EnsuredArtifact(s) (either in `args`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      or in `additional_waits`), we defer printing until after these artifact(s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      have been materialized in phase 2. When all required artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      are materialized, the relevant string is printed immediately.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Case 1: Streaming Behavior When No Artifacts Are Involved</strong>:</p>
<ul>
<li><code>ctx.output.stream(&quot;Hello World&quot;)</code></li>
<li>Evaluated during Phase 1. The message “Hello World” is emitted immediately</li>
</ul>
<p><strong>Case 2: Streaming Behavior When Artifacts Are Involved</strong>:</p>
<ul>
<li><code>args</code> have EnsuredArtifacts or <code>additional_waits</code> is not empty.</li>
<li>The print is deferred until those artifacts have all been materalized.</li>
</ul>
<p>Thus, users can write:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ensured0 = ctx.output.ensure(my_artifact0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ensured1 = ctx.output.ensure(my_artifact1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Wait for ens_art to be ready, then print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ctx.output.stream(&quot;Artifact path:&quot;, ensured0, additional_waits=[ensured1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-implementation-sketch">4. Implementation Sketch<a href="#4-implementation-sketch" class="hash-link" aria-label="Direct link to 4. Implementation Sketch" title="Direct link to 4. Implementation Sketch">​</a></h2>
<ul>
<li>
<p>Phase 1 (BXL Evaluation)</p>
<ul>
<li>When we have <strong>Case 1</strong>, we will output the string to stdout by
<code>PartialResultDispatcher</code> and save the output in the cache file associated
with the bxl key.</li>
<li>If we have <strong>Case 2</strong>, we will store the output string and related waits on
artifacts in the result of bxl key.</li>
</ul>
</li>
<li>
<p>Phase 2 (Materialization)</p>
<ul>
<li>As artifacts materialize, mark them “ready.”</li>
<li>After each artifact’s materialization, check which print requests are now
satisfied (i.e., all required artifacts are “ready”). Those requests are
immediately printed to stdout.</li>
</ul>
</li>
<li>
<p>If bxl key is get from cache which means we skip the <code>Phase 1</code> and no output
from that phase, get the streaming output cache and print to stdout.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-alternative-solutions">5. Alternative Solutions<a href="#5-alternative-solutions" class="hash-link" aria-label="Direct link to 5. Alternative Solutions" title="Direct link to 5. Alternative Solutions">​</a></h2>
<p><strong>Alternative 1: Callback-Based</strong> Api would like this</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def OutputStream.print(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *args,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sep: str = &quot; &quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    additional_waits: List[EnsuredArtifact] = [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    callback: Optional[Callable[[EnsuredArtifact], None]] = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) -&gt; None</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or even attaching a callback directly on <code>ctx.output.ensure(...)</code></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def OutputStream.ensure(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    artifact: Artifact,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    callback: Optional[Callable[[EnsuredArtifact], None]] = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) -&gt; EnsuredArtifact:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>Advantages:</em></p>
<ul>
<li>Users can programmatically handle “when artifact is ready, do X” in BXL
scripts, leading to more flexibility.</li>
<li>More intuitive to users</li>
</ul>
<p><em>Downsides:</em></p>
<ul>
<li>When Phase 1 finishes, we do not have BXL runtime in Phase 1. In this case, we
need to provide a bxl runtime and provide a <strong>limited</strong> context to execute
callbacks</li>
<li>More complex to implement and reason about.</li>
<li>“print once artifacts are ready” use case is already covered by the proposed
solution.</li>
</ul>
<p>If user cannot implement what they want to do using the proposed solution, we
can provide this callback later on without introducing any breaking changes.</p>
<p><strong>Alternative 2: CLI Flag for Streaming</strong></p>
<p>Instead of use <code>ctx.output.stream</code> at the call site, a global CLI flag
<code>--streaming</code> could exist. That would make all <code>ctx.output.print</code> “streaming”.
However:</p>
<ul>
<li>It lacks fine-grained control. Users cannot selectively choose which prints
are delayed/streamed.</li>
<li>The proposed solution offers more flexibility by controlling streaming at each
print call.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-potential-future-work">6. Potential Future Work<a href="#6-potential-future-work" class="hash-link" aria-label="Direct link to 6. Potential Future Work" title="Direct link to 6. Potential Future Work">​</a></h2>
<ol>
<li>
<p>Prioritized Materialization:</p>
<ul>
<li>A flag or mechanism to ensure certain artifacts are materialized first
(blocking the remaining artifacts), so streaming prints that depend on them
can happen sooner.</li>
</ul>
</li>
<li>
<p>Streaming Build Actions:</p>
</li>
</ol>
<ul>
<li>Stream outputs of each build actions in <code>ctx.build</code>. With Structured Action
Errors IDEs can easily parsed the compile errors</li>
</ul>
<ol start="3">
<li>
<p>Streaming Output for Other Lazy APIs:</p>
<ul>
<li>Extend similar streaming logic to apis like
<code>ctx.lazy.unconfigured_target_node(patterns like cell//path/to/...)</code>,
queries or other lazy operations, so partial results appear earlier in
logs.</li>
</ul>
</li>
<li>
<p>Instead of printing only to stdout, support more flexible transport layers
(e.g. socket file) or structured encodings for streaming data.</p>
</li>
</ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-overview-and-context" class="table-of-contents__link toc-highlight">1. Overview and Context</a></li><li><a href="#2-goal" class="table-of-contents__link toc-highlight">2. Goal</a></li><li><a href="#3-proposed-api" class="table-of-contents__link toc-highlight">3. Proposed API</a></li><li><a href="#4-implementation-sketch" class="table-of-contents__link toc-highlight">4. Implementation Sketch</a></li><li><a href="#5-alternative-solutions" class="table-of-contents__link toc-highlight">5. Alternative Solutions</a></li><li><a href="#6-potential-future-work" class="table-of-contents__link toc-highlight">6. Potential Future Work</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">User guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>