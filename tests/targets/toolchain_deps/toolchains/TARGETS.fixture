load(":defs.bzl", "alias", "command", "toolchain")

command(
    name = "compile_python_release_windows",
    source = "python_release_windows.sh",
)

command(
    name = "compile_python_debug_windows",
    source = "python_debug_windows.sh",
)

command(
    name = "compile_python_release_linux",
    source = "python_release_linux.sh",
)

command(
    name = "compile_python_debug_linux",
    source = "python_debug_linux.sh",
)

command(
    name = "compile_asic",
    source = "asic.sh",
    compatible_with = ["//config:windows"],
)

alias(
    name = "python_release",
    dep = select({
        "//config:windows": ":compile_python_release_windows",
        "//config:linux": ":compile_python_release_linux",
    })
)

alias(
    name = "python_debug",
    dep = select({
        "//config:windows": ":compile_python_debug_windows",
        "//config:linux": ":compile_python_debug_linux",
    })
)

toolchain(
    name = "python",
    dep = select({
        "//config:debug": ":python_debug",
        "//config:release": ":python_release",
    })
)

toolchain(
    name = "asic",
    dep = ":compile_asic",
)
