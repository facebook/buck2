"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9182],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var a=s(96540);const t={},i=a.createContext(t);function o(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(i.Provider,{value:n},e.children)}},68004:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"users/loading_data","title":"Loading Data in Starlark","description":"You can load static data from within BUCK or .bzl files, as long as that","source":"@site/../docs/users/loading_data.md","sourceDirName":"users","slug":"/users/loading_data","permalink":"/docs/users/loading_data","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"loading_data","title":"Loading Data in Starlark"}}');var t=s(74848),i=s(28453);const o={id:"loading_data",title:"Loading Data in Starlark"},l=void 0,r={},d=[];function c(e){const n={a:"a",code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["You can load static data from within ",(0,t.jsx)(n.code,{children:"BUCK"})," or ",(0,t.jsx)(n.code,{children:".bzl"})," files, as long as that\nstatic data is stored in a JSON or TOML file in a package."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'load("//foo:bar.toml", "value")\n\nsome_rule(\n    name = "my_rule",\n    data = value,\n)\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This is useful for example if the data being loaded is generated outside of the\nbuild process, but is necessary for the build itself - like URLs and checksums\nbeing passed into\n",(0,t.jsx)(n.a,{href:"https://buck2.build/docs/prelude/rules/core/http_archive/",children:(0,t.jsx)(n.code,{children:"http_archive"})}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The file name must end in ",(0,t.jsx)(n.code,{children:".toml"})," or ",(0,t.jsx)(n.code,{children:".json"}),", and ",(0,t.jsx)(n.code,{children:"load()"})," can only import the\nname ",(0,t.jsx)(n.code,{children:"value"})," from these files. For TOML, ",(0,t.jsx)(n.code,{children:"value"})," is always going to be a\ndictionary with ",(0,t.jsx)(n.code,{children:"str"})," keys (i.e. a\n",(0,t.jsx)(n.a,{href:"https://toml.io/en/v1.0.0#table",children:"TOML table"}),"), and for JSON it maps to whatever\nvalue is in the file."]}),"\n",(0,t.jsxs)(n.p,{children:["If a name other than ",(0,t.jsx)(n.code,{children:"value"})," is needed, ",(0,t.jsx)(n.code,{children:"load()"})," allows aliasing:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'load("//foo:bar.toml", my_more_specific_name = "value")\n\nprint(my_more_specific_name)\n'})}),"\n",(0,t.jsx)(n.p,{children:"TOML types map unambiguously to JSON, and JSON types map unambiguously to\nStarlark like you might expect:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"null"})," maps to ",(0,t.jsx)(n.code,{children:"None"}),", and ",(0,t.jsx)(n.code,{children:"true"}),"/",(0,t.jsx)(n.code,{children:"false"})," maps to ",(0,t.jsx)(n.code,{children:"True"}),"/",(0,t.jsx)(n.code,{children:"False"})]}),"\n",(0,t.jsxs)(n.li,{children:["numbers map to ",(0,t.jsx)(n.code,{children:"int"})," or ",(0,t.jsx)(n.code,{children:"float"})]}),"\n",(0,t.jsxs)(n.li,{children:["strings map to ",(0,t.jsx)(n.code,{children:"str"})]}),"\n",(0,t.jsxs)(n.li,{children:["arrays map to ",(0,t.jsx)(n.code,{children:"list"})]}),"\n",(0,t.jsxs)(n.li,{children:["objects map to ",(0,t.jsx)(n.code,{children:"dict"})]}),"\n",(0,t.jsxs)(n.li,{children:["tables (in TOML) map to ",(0,t.jsx)(n.code,{children:"str"}),"-keyed ",(0,t.jsx)(n.code,{children:"dict"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);