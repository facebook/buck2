<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-api/bxl/Context" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Context | Buck2</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://buck2.build/docs/api/bxl/Context/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Context | Buck2"><meta data-rh="true" name="description" content="The bxl context that the top level bxl implementation receives as parameter. This context contains all the core bxl functions to query, build, create actions, etc."><meta data-rh="true" property="og:description" content="The bxl context that the top level bxl implementation receives as parameter. This context contains all the core bxl functions to query, build, create actions, etc."><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://buck2.build/docs/api/bxl/Context/"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/api/bxl/Context/" hreflang="en"><link data-rh="true" rel="alternate" href="https://buck2.build/docs/api/bxl/Context/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9RT0EWXQO8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Buck2" href="/opensearch.xml">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GEGGHE39PE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GEGGHE39PE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.365ec9d7.css">
<script src="/assets/js/runtime~main.c6737254.js" defer="defer"></script>
<script src="/assets/js/main.8692fade.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Buck2 Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Buck2 Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Buck2</b></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/api/">API</a><a class="navbar__item navbar__link" href="/docs/prelude/rules/">Rules</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/api/">APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/prelude/rules/">Rules</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api/starlark/">Starlark APIs</a><button aria-label="Collapse sidebar category &#x27;Starlark APIs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/bool/">bool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/dict/">dict</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/float/">float</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/int/">int</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/json/">json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/list/">list</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/namespace/">namespace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/range/">range</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/set/">set</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/str/">str</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/struct/">struct</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/tuple/">tuple</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/type/">type</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/starlark/typing/">typing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api/build/">Build APIs</a><button aria-label="Collapse sidebar category &#x27;Build APIs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ActionErrorCtx/">ActionErrorCtx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ActionSubError/">ActionSubError</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/AnalysisActions/">AnalysisActions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/AnalysisContext/">AnalysisContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/AnonTarget/">AnonTarget</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/AnonTargets/">AnonTargets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/Artifact/">Artifact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ArtifactTag/">ArtifactTag</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ArtifactValue/">ArtifactValue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/Attr/">Attr</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/BuckRegex/">BuckRegex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/CellPath/">CellPath</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/CellRoot/">CellRoot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/CommandExecutorConfig/">CommandExecutorConfig</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/CommandLineInputs/">CommandLineInputs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ConfigurationInfo/">ConfigurationInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ConfiguredProvidersLabel/">ConfiguredProvidersLabel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ConstraintSettingInfo/">ConstraintSettingInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ConstraintValueInfo/">ConstraintValueInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/DefaultInfo/">DefaultInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/DepOnlyIncompatibleInfo/">DepOnlyIncompatibleInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/DepOnlyIncompatibleRollout/">DepOnlyIncompatibleRollout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/Dependency/">Dependency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/DigestConfig/">DigestConfig</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/DynamicActions/">DynamicActions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/DynamicActionsCallable/">DynamicActionsCallable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/DynamicValue/">DynamicValue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ExternalRunnerTestInfo/">ExternalRunnerTestInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/Label/">Label</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/LocalResourceInfo/">LocalResourceInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/OutputArtifact/">OutputArtifact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/PackagePath/">PackagePath</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/PlatformInfo/">PlatformInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ProjectRoot/">ProjectRoot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/Promise/">Promise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/PromiseArtifact/">PromiseArtifact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ProviderCollection/">ProviderCollection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/RequiredTestLocalResource/">RequiredTestLocalResource</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ResolvedDynamicValue/">ResolvedDynamicValue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ResolvedStringWithMacros/">ResolvedStringWithMacros</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/Rule/">Rule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/RunInfo/">RunInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/Select/">Select</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TaggedCommandLine/">TaggedCommandLine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TaggedValue/">TaggedValue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TargetLabel/">TargetLabel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TemplatePlaceholderInfo/">TemplatePlaceholderInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TransitionInfo/">TransitionInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TransitiveSet/">TransitiveSet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TransitiveSetArgsProjection/">TransitiveSetArgsProjection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TransitiveSetArgsProjectionIterator/">TransitiveSetArgsProjectionIterator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TransitiveSetDefinition/">TransitiveSetDefinition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TransitiveSetIterator/">TransitiveSetIterator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/TransitiveSetJsonProjection/">TransitiveSetJsonProjection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ValidationInfo/">ValidationInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/ValidationSpec/">ValidationSpec</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/WorkerInfo/">WorkerInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/WorkerRunInfo/">WorkerRunInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/WriteJsonCliArgs/">WriteJsonCliArgs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/attrs/">attrs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/cmd_args/">cmd_args</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api/build/dynattrs/">dynattrs</a><button aria-label="Expand sidebar category &#x27;dynattrs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/api/build/plugins/">plugins</a><button aria-label="Expand sidebar category &#x27;plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/build/regex/">regex</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/api/bxl/">BXL APIs</a><button aria-label="Collapse sidebar category &#x27;BXL APIs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/ActionAttr/">ActionAttr</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/ActionQueryNode/">ActionQueryNode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/Actions/">Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/AnalysisResult/">AnalysisResult</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/AqueryContext/">AqueryContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/AuditContext/">AuditContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/BuildResult/">BuildResult</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/BuiltArtifactsIterable/">BuiltArtifactsIterable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/CliArgs/">CliArgs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/ConfiguredAttr/">ConfiguredAttr</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/ConfiguredTargetNode/">ConfiguredTargetNode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/ConfiguredTargetSet/">ConfiguredTargetSet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/api/bxl/Context/">Context</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/CqueryContext/">CqueryContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/EnsuredArtifact/">EnsuredArtifact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/Error/">Error</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/FailedArtifactsIterable/">FailedArtifactsIterable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/FileNode/">FileNode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/Filesystem/">Filesystem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/Lazy/">Lazy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/LazyAttrs/">LazyAttrs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/LazyContext/">LazyContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/LazyCqueryContext/">LazyCqueryContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/LazyResolvedAttrs/">LazyResolvedAttrs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/LazyUqueryContext/">LazyUqueryContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/OutputStream/">OutputStream</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/Result/">Result</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/SelectConcat/">SelectConcat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/SelectDict/">SelectDict</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/TargetUniverse/">TargetUniverse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/UnconfiguredTargetNode/">UnconfiguredTargetNode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/UnconfiguredTargetSet/">UnconfiguredTargetSet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/UqueryContext/">UqueryContext</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl/cli_args/">cli_args</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/api/bxl_utils/ensure/">BXL utils functions</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl_utils/ensure/">ensure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api/bxl_utils/lazy/">lazy</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/api/bxl/"><span itemprop="name">BXL APIs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Context</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Context</h1></header>
<p>The bxl context that the top level bxl implementation receives as parameter. This context contains all the core bxl functions to query, build, create actions, etc.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextanalysis">Context.analysis<a href="#contextanalysis" class="hash-link" aria-label="Direct link to Context.analysis" title="Direct link to Context.analysis">​</a></h2>
<pre class="language-python"><code>def Context.analysis(
labels: <a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/Label/">Label</a> | <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | <a href="/docs/api/bxl/ConfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/Label/">Label</a> | <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>],
target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/starlark/str/">str</a> = ...,
*,
skip_incompatible: <a href="/docs/api/starlark/bool/">bool</a> = True,
) -&gt; None | <a href="/docs/api/bxl/AnalysisResult/">bxl.AnalysisResult</a> | dict[<a href="/docs/api/build/Label/">Label</a>, <a href="/docs/api/bxl/AnalysisResult/">bxl.AnalysisResult</a>]</code></pre>
<p>Runs analysis on the given <code>labels</code>, accepting an optional <code>target_platform</code> which is the target platform configuration used to resolve configurations of any unconfigured target nodes, and an optional <code>skip_incompatible</code> boolean that indicates whether to skip analysis of nodes that are incompatible with the target platform. The <code>target_platform</code> is either a string that can be parsed as a target label, or a target label.</p>
<p>The given <code>labels</code> is a providers expression, which is either:</p>
<ul>
<li>a single string that is a <code>target pattern</code>.</li>
<li>a single target node or label, configured or unconfigured</li>
<li>a single sub target label, configured or unconfigured</li>
<li>a list of the two options above.</li>
</ul>
<p>This returns either a single <code>analysis_result</code> if the given <code>labels</code> argument is &quot;singular&quot;,
or a dict keyed by sub target labels of <code>analysis</code> if the given <code>labels</code> argument
is list-like</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextaquery">Context.aquery<a href="#contextaquery" class="hash-link" aria-label="Direct link to Context.aquery" title="Direct link to Context.aquery">​</a></h2>
<pre class="language-python"><code>def Context.aquery(
target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/starlark/str/">str</a> = ...,
) -&gt; <a href="/docs/api/bxl/AqueryContext/">bxl.AqueryContext</a></code></pre>
<p>Returns the <code>aqueryctx</code> that holds all the aquery functions. This function takes an optional parameter <code>target_platform</code>, which is the target platform configuration used to configured any unconfigured target nodes.</p>
<p>The <code>target_platform</code> is a target label, or a string that is a target label.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextaudit">Context.audit<a href="#contextaudit" class="hash-link" aria-label="Direct link to Context.audit" title="Direct link to Context.audit">​</a></h2>
<pre class="language-python"><code>def Context.audit(
) -&gt; <a href="/docs/api/bxl/AuditContext/">bxl.AuditContext</a></code></pre>
<p>Returns the <code>audit_ctx</code> that holds all the audit functions.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextbuild">Context.build<a href="#contextbuild" class="hash-link" aria-label="Direct link to Context.build" title="Direct link to Context.build">​</a></h2>
<pre class="language-python"><code>def Context.build(
labels: <a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/Label/">Label</a> | <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | <a href="/docs/api/bxl/ConfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/Label/">Label</a> | <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>],
target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/starlark/str/">str</a> = ...,
*,
materializations: <a href="/docs/api/starlark/str/">str</a> = &quot;default&quot;,
) -&gt; dict[<a href="/docs/api/build/Label/">Label</a>, <a href="/docs/api/bxl/BuildResult/">bxl.BuildResult</a>]</code></pre>
<p>Runs a build on the given <code>labels</code>, accepting an optional <code>target_platform</code> which is the target platform configuration used to resolve configurations. Note that when <code>build()</code> is called, the artifacts are materialized without needing to additionally call <code>ensure()</code> on them.</p>
<p>The given <code>labels</code> is a providers expression, which is either:</p>
<ul>
<li>a single string that is a <code>target pattern</code>.</li>
<li>a single target node or label, configured or unconfigured</li>
<li>a single provider label, configured or unconfigured</li>
<li>a list of the two options above.</li>
</ul>
<p>materializations can be one of:</p>
<ul>
<li>&quot;default&quot;<!-- -->
<ul>
<li>defer to the configuration settings to decide whether to materialize or not</li>
</ul>
</li>
<li>&quot;materialize&quot;<!-- -->
<ul>
<li>force materialization of build results at the end of the build.</li>
</ul>
</li>
<li>&quot;skip&quot;<!-- -->
<ul>
<li>skip materialization of the build results</li>
</ul>
</li>
</ul>
<p>This returns a dict keyed by sub target labels mapped to <code>bxl_build_result</code>s if the
given <code>labels</code> argument is list-like.</p>
<p>This function is not available on the <code>bxl_ctx</code> when called from <code>dynamic_output</code>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextbxl_actions">Context.bxl_actions<a href="#contextbxl_actions" class="hash-link" aria-label="Direct link to Context.bxl_actions" title="Direct link to Context.bxl_actions">​</a></h2>
<pre class="language-python"><code>def Context.bxl_actions(
*,
exec_deps: None | <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>] = None,
toolchains: None | <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>] = None,
target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/starlark/str/">str</a> = ...,
exec_compatible_with: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>] = None,
) -&gt; <a href="/docs/api/bxl/Actions/">bxl.Actions</a></code></pre>
<p>Returns the bxl actions to create and register actions for this bxl function. This will have the execution platform resolved according to the execution deps and toolchains you pass into this function. You&#x27;ll be able to access the analysis action factory of the correct execution platform, toolchains, and execution deps of the corresponding configuration via this context.</p>
<p>Actions created by bxl will not be built by default. Instead, they are marked to be built
by <code>ctx.output.ensure(artifact)</code> on the output module of the <code>bxl_ctx</code>. Only artifacts
marked by ensure will be built.</p>
<p>Sample usage:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_impl_write_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bxl_actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bxl_actions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bxl_actions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my_output&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_content&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ensured </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ensure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ensured</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are several optional named parameters:</p>
<p><code>exec_deps</code> - These are dependencies you wish to access as executables for creating the action.
This is usually the same set of targets one would pass to rule&#x27;s <code>attr.exec_dep</code>.
<code>toolchains</code> - The set of toolchains needed for the actions you intend to create.
<code>target_platform</code> - The intended target platform for your toolchains
<code>exec_compatible_with</code> - Explicit list of configuration nodes (like platforms or constraints)
that these actions are compatible with. This is the &#x27;exec_compatible_with&#x27; attribute of a target.</p>
<p>If you passed in <code>exec_deps</code> or <code>toolchains</code>, you can access the resolved dependencies using the <code>exec_deps</code>
and <code>toolchains</code> attributes on the <code>bxl_actions</code>, which both return a <code>dict</code> of unconfigured subtarget labels
and their configured/resolved <code>dependency</code> objects.</p>
<p>Note that the keys of <code>exec_deps</code> and <code>toolchains</code> must be unconfigured subtarget labels (<code>providers_label</code>s),
and not unconfigured target labels. You can use <code>ctx.unconfigured_sub_targets(...)</code> or <code>with_sub_target()</code> on
<code>target_label</code> to create the label.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_impl_run_action</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   my_exec_dep </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unconfigured_sub_targets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;foo//bar:baz&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># has some provider that you would use in the action</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   bxl_actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bxl_actions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exec_deps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">my_exec_dep</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># call once, reuse wherever needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bxl_actions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token string" style="color:#e3116c">&quot;python3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           bxl_actions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exec_deps</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">my_exec_dep</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">RunInfo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># access resolved exec_deps on the `bxl_actions`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">as_output</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       category </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;command&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       local_only </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ensure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When called from a <code>dynamic_output</code>, <code>bxl_actions()</code> cannot be configured with a different execution
platform resolution from the parent BXL.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextcell_root">Context.cell_root<a href="#contextcell_root" class="hash-link" aria-label="Direct link to Context.cell_root" title="Direct link to Context.cell_root">​</a></h2>
<pre class="language-python"><code>def Context.cell_root() -&gt; <a href="/docs/api/starlark/str/">str</a></code></pre>
<p>Returns the absolute path to the cell of the repository</p>
<p>This function is not available on the <code>bxl_ctx</code> when called from <code>dynamic_output</code>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextcli_args">Context.cli_args<a href="#contextcli_args" class="hash-link" aria-label="Direct link to Context.cli_args" title="Direct link to Context.cli_args">​</a></h2>
<pre class="language-python"><code>Context.cli_args: struct(..)</code></pre>
<p>A struct of the command line args as declared using the [<code>cli_args</code>] module. These command lines are resolved per the users input on the cli when invoking the bxl script.</p>
<p>If you wish to pass in a kebab-cased arg, the arg accessed from the BXL context&#x27;s <code>cli_args</code>
attribute will always be in snakecase. For example, if you passed in <code>my-arg</code>, accessing it
within BXL would look like <code>ctx.cli_args.my_arg</code>.</p>
<p>This attribute is not available on the bxl context within the a dynamic lambda.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextconfigured_targets">Context.configured_targets<a href="#contextconfigured_targets" class="hash-link" aria-label="Direct link to Context.configured_targets" title="Direct link to Context.configured_targets">​</a></h2>
<pre class="language-python"><code>def Context.configured_targets(
labels: <a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/ConfiguredTargetSet/">target_set</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>],
/,
target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/starlark/str/">str</a> = ...,
*,
modifiers: None | list[<a href="/docs/api/starlark/str/">str</a>] = None,
) -&gt; None | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/ConfiguredTargetSet/">target_set</a></code></pre>
<p>Gets the target nodes for the <code>labels</code>, accepting an optional <code>target_platform</code> which is the target platform configuration used to resolve configurations of any unconfigured target nodes. The <code>target_platform</code> is either a string that can be parsed as a target label, or a target label.</p>
<p>The given <code>labels</code> is a [<code>TargetListExpr</code>], which is either:</p>
<ul>
<li>a single string that is a <code>target pattern</code>.</li>
<li>a single target node or label, configured or unconfigured</li>
<li>a list of the two options above.</li>
</ul>
<p>Note that this function does not accept <code>Label</code> (which is a configured provider label), since this
is the label of a subtarget. You can get the underlying configured target label on the <code>Label</code>
using <code>configured_targets()</code> (ex: <code>my_label.configured_target()</code>).</p>
<p>This returns either a single <code>target_node</code> if the given <code>labels</code>
is &quot;singular&quot;, a dict keyed by target labels of <code>target_node</code> if the
given <code>labels</code> is list-like</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextcquery">Context.cquery<a href="#contextcquery" class="hash-link" aria-label="Direct link to Context.cquery" title="Direct link to Context.cquery">​</a></h2>
<pre class="language-python"><code>def Context.cquery(
target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/starlark/str/">str</a> = ...,
) -&gt; <a href="/docs/api/bxl/CqueryContext/">bxl.CqueryContext</a></code></pre>
<p>Returns the <code>cqueryctx</code> that holds all the cquery functions. This function takes an optional parameter <code>target_platform</code>, which is the target platform configuration used to configured any unconfigured target nodes.</p>
<p>The <code>target_platform</code> is a target label, or a string that is a target label.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextfs">Context.fs<a href="#contextfs" class="hash-link" aria-label="Direct link to Context.fs" title="Direct link to Context.fs">​</a></h2>
<pre class="language-python"><code>Context.fs: <a href="/docs/api/bxl/Filesystem/">bxl.Filesystem</a></code></pre>
<p>Returns the <code>bxl.Filesystem</code> for performing a basic set of filesystem operations within bxl</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextinstant_event">Context.instant_event<a href="#contextinstant_event" class="hash-link" aria-label="Direct link to Context.instant_event" title="Direct link to Context.instant_event">​</a></h2>
<pre class="language-python"><code>def Context.instant_event(
*,
id: <a href="/docs/api/starlark/str/">str</a>,
metadata,
) -&gt; None</code></pre>
<p>Emits a user-defined instant event, taking in a required string id and a metadata dictionary where the keys are strings, and values are either strings, bools, or ints. The id is user-supplied, and used to identify the instant events in the event logs more easily.</p>
<p>You may pass in an ensured artifact as a value in the metadata. The resulting output would be the ensured
artifact&#x27;s relative or absolute path as a string.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextlazy">Context.lazy<a href="#contextlazy" class="hash-link" aria-label="Direct link to Context.lazy" title="Direct link to Context.lazy">​</a></h2>
<pre class="language-python"><code>Context.lazy: <a href="/docs/api/bxl/LazyContext/">bxl.LazyContext</a></code></pre>
<p>Lazy/batch/error handling operations.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextmodifiers">Context.modifiers<a href="#contextmodifiers" class="hash-link" aria-label="Direct link to Context.modifiers" title="Direct link to Context.modifiers">​</a></h2>
<pre class="language-python"><code>Context.modifiers: list[<a href="/docs/api/starlark/str/">str</a>]</code></pre>
<p>The modifiers from the bxl invocation. It is from the <code>--modifier</code> flag.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextoutput">Context.output<a href="#contextoutput" class="hash-link" aria-label="Direct link to Context.output" title="Direct link to Context.output">​</a></h2>
<pre class="language-python"><code>Context.output: <a href="/docs/api/bxl/OutputStream/">bxl.OutputStream</a></code></pre>
<p>Gets the output stream to the console via stdout. Items written to the output stream are considered to be the results of a bxl script, which will be displayed to stdout by buck2 even when the script is cached.</p>
<p>Prints that are not result of the bxl should be printed via stderr via the stdlib <code>print</code>
and <code>pprint</code>.</p>
<p>This function is not available on the <code>bxl_ctx</code> when called from <code>dynamic_output</code>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextresolve">Context.resolve<a href="#contextresolve" class="hash-link" aria-label="Direct link to Context.resolve" title="Direct link to Context.resolve">​</a></h2>
<pre class="language-python"><code>def Context.resolve(
action_factory: <a href="/docs/api/build/AnalysisActions/">AnalysisActions</a>,
promise: <a href="/docs/api/build/Promise/">Promise</a>,
)</code></pre>
<p>Awaits a promise and returns an optional value of the promise.</p>
<p>Sample usage:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;//path/to/rules:rules.bzl&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_anon_targets_rule&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_map_function&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_resolve_impl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    actions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bxl_actions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">actions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    my_attrs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;int&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;list_string&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;a-string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> actions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">anon_target</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">my_anon_targets_rule</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> attrs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">my_map_function</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    providers_result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> promise</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># result is `ProviderCollection` type, which is a collection of `Provider`s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">providers_result</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">my_field</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextroot">Context.root<a href="#contextroot" class="hash-link" aria-label="Direct link to Context.root" title="Direct link to Context.root">​</a></h2>
<pre class="language-python"><code>def Context.root() -&gt; <a href="/docs/api/starlark/str/">str</a></code></pre>
<p>Returns the absolute path to the root of the repository</p>
<p>This function is not available on the <code>bxl_ctx</code> when called from <code>dynamic_output</code>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contexttarget_exists">Context.target_exists<a href="#contexttarget_exists" class="hash-link" aria-label="Direct link to Context.target_exists" title="Direct link to Context.target_exists">​</a></h2>
<pre class="language-python"><code>def Context.target_exists(
label: <a href="/docs/api/starlark/str/">str</a>,
) -&gt; <a href="/docs/api/starlark/bool/">bool</a></code></pre>
<p>Checks if a target label exists. Target label must be a string literal, and an exact target.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contexttarget_platform">Context.target_platform<a href="#contexttarget_platform" class="hash-link" aria-label="Direct link to Context.target_platform" title="Direct link to Context.target_platform">​</a></h2>
<pre class="language-python"><code>Context.target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a></code></pre>
<p>The target_platform from the bxl invocation. It is from the <code>--target-platforms</code> flag.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contexttarget_universe">Context.target_universe<a href="#contexttarget_universe" class="hash-link" aria-label="Direct link to Context.target_universe" title="Direct link to Context.target_universe">​</a></h2>
<pre class="language-python"><code>def Context.target_universe(
labels: <a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/ConfiguredTargetSet/">target_set</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/ConfiguredTargetLabel/">ConfiguredTargetLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/ConfiguredTargetNode/">bxl.ConfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>],
target_platform: None | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/starlark/str/">str</a> = ...,
*,
keep_going: <a href="/docs/api/starlark/bool/">bool</a> = False,
modifiers: list[<a href="/docs/api/starlark/str/">str</a>] = [],
) -&gt; <a href="/docs/api/bxl/TargetUniverse/">bxl.TargetUniverse</a></code></pre>
<p>Returns the <code>TargetUniverse</code> that can lookup valid configured nodes in the universe.</p>
<p>The given <code>labels</code> is a target expression, which is either:</p>
<ul>
<li>a single string that is a <code>target pattern</code>.</li>
<li>a single target node or label, configured or unconfigured</li>
<li>a single subtarget label, configured or unconfigured</li>
<li>a list of the two options above.</li>
</ul>
<p>Also takes in an optional <code>target_platform</code> param to configure the nodes with, and a <code>keep_going</code>
flag to skip any loading or configuration errors. Note that <code>keep_going</code> currently can only be used
if the input labels is a single target pattern as a string literal.</p>
<p>The default modifiers used to configure the target nodes are empty. If you want to use the
modifiers from the cli, you can pass <code>ctx.modifiers</code> to the argument <code>modifiers</code> of this function.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextunconfigured_sub_targets">Context.unconfigured_sub_targets<a href="#contextunconfigured_sub_targets" class="hash-link" aria-label="Direct link to Context.unconfigured_sub_targets" title="Direct link to Context.unconfigured_sub_targets"> ​</a></h2>
<pre class="language-python"><code>def Context.unconfigured_sub_targets(
labels: <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>],
) -&gt; <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a> | dict[<a href="/docs/api/starlark/str/">str</a>, <a href="/docs/api/build/ProvidersLabel/">ProvidersLabel</a>]</code></pre>
<p>Gets the unconfigured subtargets for the given <code>labels</code></p>
<p>The given <code>labels</code> is a providers expression, which is either:</p>
<ul>
<li>a single string that is a <code>target pattern</code>.</li>
<li>a single target node or label, configured or unconfigured</li>
<li>a single subtarget label, configured or unconfigured</li>
<li>a list of the two options above.</li>
</ul>
<p>This returns either a single <code>providers_label</code> if the given <code>labels</code> argument
is &quot;singular&quot;, or dict of the subtarget string representation to the
<code>providers_label</code> if the given <code>labels</code> argument is list-like.</p>
<p>Note that this function does not check that this subtarget exists in the repo.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextunconfigured_targets">Context.unconfigured_targets<a href="#contextunconfigured_targets" class="hash-link" aria-label="Direct link to Context.unconfigured_targets" title="Direct link to Context.unconfigured_targets">​</a></h2>
<pre class="language-python"><code>def Context.unconfigured_targets(
labels: <a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a> | list[<a href="/docs/api/build/TargetLabel/">TargetLabel</a> | <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/starlark/str/">str</a>],
) -&gt; <a href="/docs/api/bxl/UnconfiguredTargetNode/">bxl.UnconfiguredTargetNode</a> | <a href="/docs/api/bxl/UnconfiguredTargetSet/">target_set</a></code></pre>
<p>Gets the unconfigured target nodes for the <code>labels</code></p>
<p>The given <code>labels</code> is either:</p>
<ul>
<li>a single string that is a <code>target pattern</code>.</li>
<li>a single unconfigured  target node or label</li>
<li>a list of the two options above.</li>
</ul>
<p>This returns either a single <code>UnconfiguredTargetNode</code> if the given <code>labels</code>
is &quot;singular&quot;, a dict keyed by target labels of <code>UnconfiguredTargetNode</code> if the
given <code>labels</code> is list-like</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contextuquery">Context.uquery<a href="#contextuquery" class="hash-link" aria-label="Direct link to Context.uquery" title="Direct link to Context.uquery">​</a></h2>
<pre class="language-python"><code>def Context.uquery(
) -&gt; <a href="/docs/api/bxl/UqueryContext/">bxl.UqueryContext</a></code></pre>
<p>Returns the <code>uqueryctx</code> that holds all uquery functions.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/api/bxl/ConfiguredTargetSet/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ConfiguredTargetSet</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/api/bxl/CqueryContext/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CqueryContext</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#contextanalysis" class="table-of-contents__link toc-highlight">Context.analysis</a></li><li><a href="#contextaquery" class="table-of-contents__link toc-highlight">Context.aquery</a></li><li><a href="#contextaudit" class="table-of-contents__link toc-highlight">Context.audit</a></li><li><a href="#contextbuild" class="table-of-contents__link toc-highlight">Context.build</a></li><li><a href="#contextbxl_actions" class="table-of-contents__link toc-highlight">Context.bxl_actions</a></li><li><a href="#contextcell_root" class="table-of-contents__link toc-highlight">Context.cell_root</a></li><li><a href="#contextcli_args" class="table-of-contents__link toc-highlight">Context.cli_args</a></li><li><a href="#contextconfigured_targets" class="table-of-contents__link toc-highlight">Context.configured_targets</a></li><li><a href="#contextcquery" class="table-of-contents__link toc-highlight">Context.cquery</a></li><li><a href="#contextfs" class="table-of-contents__link toc-highlight">Context.fs</a></li><li><a href="#contextinstant_event" class="table-of-contents__link toc-highlight">Context.instant_event</a></li><li><a href="#contextlazy" class="table-of-contents__link toc-highlight">Context.lazy</a></li><li><a href="#contextmodifiers" class="table-of-contents__link toc-highlight">Context.modifiers</a></li><li><a href="#contextoutput" class="table-of-contents__link toc-highlight">Context.output</a></li><li><a href="#contextresolve" class="table-of-contents__link toc-highlight">Context.resolve</a></li><li><a href="#contextroot" class="table-of-contents__link toc-highlight">Context.root</a></li><li><a href="#contexttarget_exists" class="table-of-contents__link toc-highlight">Context.target_exists</a></li><li><a href="#contexttarget_platform" class="table-of-contents__link toc-highlight">Context.target_platform</a></li><li><a href="#contexttarget_universe" class="table-of-contents__link toc-highlight">Context.target_universe</a></li><li><a href="#contextunconfigured_sub_targets" class="table-of-contents__link toc-highlight">Context.unconfigured_sub_targets</a></li><li><a href="#contextunconfigured_targets" class="table-of-contents__link toc-highlight">Context.unconfigured_targets</a></li><li><a href="#contextuquery" class="table-of-contents__link toc-highlight">Context.uquery</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">User guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/buck2" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>