# @noautodeps

load("//buck2/tests/targets/rules:bzl_native.bzl", "bzl_native")

bzl_native.genrule(
    name = "copy_data",
    srcs = ["DATA"],
    out = "data.copy",
    bash = "cp $SRCS $OUT",
)

bzl_native.sh_binary(
    name = "diff",
    main = "diff.sh",
    resources = [
        "DATA",
        ":copy_data",
    ],
)

bzl_native.genrule(
    name = "gen",
    out = "out.txt",
    bash = "$(exe :diff) arg1 arg2 > $OUT",
)
