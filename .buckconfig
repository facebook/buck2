[cells]
gh_facebook_buck2 = .
gh_facebook_buck2_shims_meta = shim

[cell_aliases]
root = gh_facebook_buck2

[oss]
internal_cell = fbcode
stripped_root_dirs = buck2

[project]
ignore = \
    app/buck2_explain, \
    app_dep_graph_rules, \
    examples, \
    integrations/rust-project/tests, \
    tests

[rust]
default_edition = 2024

[buck2]
digest_algorithms         = SHA256
materializations          = deferred
sqlite_materializer_state = true
defer_write_actions       = true
clean_stale_enabled       = true
restarter                 = true
hash_all_commands         = true

[build]
execution_platforms = //platforms:platforms

[buck2_re_client]
use_fbcode_metadata = false
capabilities         = true
tls                  = true
engine_address       = grpc://remote.buildbuddy.io
action_cache_address = grpc://remote.buildbuddy.io
cas_address          = grpc://remote.buildbuddy.io
http_headers         = x-buildbuddy-api-key:$BUILDBUDDY_API_KEY
instance_name        = $REMOTE_INSTANCE_NAME
