# Basic unified constraint
load("@prelude//:native.bzl", "native")
load(":defs.bzl", "unified_foo")

constraint = native.constraint
platform = native.platform

constraint(
    name = "os",
    values = [
        "linux",
        "macos",
        "windows",
    ],
)

platform(
    name = "linux_platform",
    constraint_values = [":os[linux]"],
)

unified_foo(
    name = "foo_target",
    os = select({
        ":os[linux]": "linux",
        ":os[macos]": "macos",
        "DEFAULT": "default",
    }),
    default_target_platform = ":linux_platform",
)
